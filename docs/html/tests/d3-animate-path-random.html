<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <style type="text/css">
        #line {
            width: 700px;
            margin: 20px 0;
            height: 300px;
            background: #eee;
        }

        button {
            margin: 20px 0 0 20px;
        }

        ​</style>
</head>
<body>
<div id="line"></div>
​
<script type="text/javascript" src="../../scripts/js/d3-3.5.17.js"></script>
<script type="text/javascript">
    var w = 700;
    var h = 300;

    var svg = d3.select("#line")
            .append("svg")
            .attr("width", w)
            .attr("height", h)
            .attr("id", "visualization");

    //    var data = d3.range(11).map(function () {
    //        return Math.random() * 10
    //    })
    //    console.log(data);

    var data = [1, 21, 30, 41, 58, 60, 79, 85, 95, 100, 110];

    var x = d3.scale.linear().domain([0, 10]).range([0, 700]);
    var y = d3.scale.linear().domain([0, 120]).range([10, 290]);

    var line = d3.svg.line()
            .interpolate("cardinal")
            .x(function (d, i) {
                return x(i);
            })
            .y(function (d) {
                return y(d);
            })

//    console.log(line);

//    var path = svg.append("path")
//            .attr("d", line(data))
//            .attr("stroke", "steelblue")
//            .attr("stroke-width", "2")
//            .attr("fill", "none");

    var path = svg.append("path")
            .data(data)
            .attr("stroke", "steelblue")
            .attr("stroke-width", "2")
            .attr("fill", "none");

    path.attr("d", line);

    var totalLength = path.node().getTotalLength();

    path.attr("stroke-dasharray", totalLength + " " + totalLength)
            .attr("stroke-dashoffset", totalLength)
            .transition()
            .duration(2000)
            .ease("linear")
            .attr("stroke-dashoffset", 0);

    svg.on("click", function () {
        path.transition()
                .duration(2000)
                .ease("linear")
                .attr("stroke-dashoffset", totalLength);
    })


</script>
</body>
</html>